<!DOCTYPE html> <html lang="pl"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>tyche 001&#58; Początki z Django i Dockerem · Rafal Makara - Blog</title> <meta property="og:title" content=" tyche 001&#58; Początki z Django i Dockerem "> <meta property="twitter:title" content=" tyche 001&#58; Początki z Django i Dockerem "> <meta property="og:description" content=" Blog o wytwarzaniu oprogramowania z punktu widzenia zarówno programisty, jak i managera. Jeżeli jesteś zainteresowany tworzeniem oprogrmaowania z uwzględnieniem obydwu tych perspektyw to ten blog jest dla Ciebie. "> <meta name="twitter:card" content="summary" /> <meta name="twitter:site" content="@rafalmakara" /> <meta property="og:image" content="https://rmakara.github.io/assets/20171125_header.jpg" /> <meta name="twitter:image" content="https://rmakara.github.io/assets/20171125_header.jpg" /> <meta name="description" content="Programista stażysta"> <link rel="icon" href="https://rmakara.github.io/pages/rmakara/assets/favicon.png"> <link rel="apple-touch-icon" href="https://rmakara.github.io/pages/rmakara/assets/touch-icon.png"> <link rel="stylesheet" href="https://rmakara.github.io/pages/rmakara/assets/core.css"> <link rel="canonical" href="https://rmakara.github.io/pages/rmakara/tyche-001-Poczatki-z-Django-i-Dockerem"> <link rel="alternate" type="application/atom+xml" title="Rafal Makara - Blog" href="https://rmakara.github.io/pages/rmakarafeed.xml" /> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </head> <body> <aside class="logo"> <a href="https://rmakara.github.io/pages/rmakara"> <img src="https://avatars0.githubusercontent.com/u/1880231?v=4" class="logo-avatar"> </a> <span class="logo-prompt code">Wróć na Stronę Główną</span> </aside> <p class="menu"> <a href="/">Strona Główna</a> | <a href="/about">O mnie</a> | <a href="/books">Książki</a> </p> <div id="content"> <article> <div class="center"> <h1 class="title">tyche 001&#58; Początki z Django i Dockerem</h1> <time class="code">2017-11-25</time> </div> <div class="divider"></div> <h1 id="programista-stażysta">Programista stażysta</h1> <p>Na początku pisania tego blogu wraz z udziałem w konkursie <a href="https://devstyle.pl/daj-sie-poznac/">Daj się poznać</a> miałem na celu napisanie aplikacji automatyzującej pracę Project Managera. Aplikacji nie rozwijałem. Ograniczyłem się do napisania dwóch skryptów, które rozwiązały moje największe problemy pracy codziennej. Nie jestem z tego powodu dumny, ale podsumowanie całości było takie, że nie wróciłem do kodowania.</p> <p>Robię podejście numer dwa. W trzyosobowym zespole rozpoczęliśmy prace nad aplikacją, którą roboczo nazwaliśmy <a href="https://pl.wikipedia.org/wiki/Tyche">tyche</a>. Nazwa pochodzi od greckiej bogini przypadku i ślepego losu. Na bieżącym etapie nie będę opisywał przeznaczenia wytwarzanej aplikacji, ponieważ na to jeszcze przyjdzie czas. W każdym razie, celem jest przypomnienie sobie umiejętności pisania kodu.</p> <h1 id="pierwsze-kroki">Pierwsze kroki</h1> <p>Rozpoczeliśmy od stworzenia zespołowego kanału <a href="http://slack.com">Slacka</a>, repozytorium kodu na <a href="github.com">GitHubie</a> wraz z podpiętym narzędziem <a href="https://www.zenhub.com/">ZenHub</a>. Poza samym stworzeniem aplikacji każdy z nas chce poznać nowe narzędzia i technologie z którymi wcześniej nie mieliśmy do czynienia. Jako bazę użyjemy Pythona 3 (polecam artykuł <a href="https://wiki.python.org/moin/Python2orPython3">Python2orPython3</a>) i frameworku Django. Żaden z nas nie ma doświadczenia w kodowaniu w Django, więc zapowiada się dość zabawna przygoda. W celu usprawnienia stawiania pierwszych kroków w pierwszym commicie do repozytorium znalazł się Dockerfile.</p> <h1 id="docker---podstawowe-polecenia">Docker - podstawowe polecenia</h1> <p>W ramach tego artykułu nie będę opisywał procesu stawiania środowiska przy wykorzystaniu gotowego obrazu <a href="https://www.docker.com/what-docker">Dockerowego</a> pobranego z <a href="https://hub.docker.com/">Docker Huba</a>, ponieważ takich opisów są już tysiące. Skorzystałem z oficjalnego tutoriala <a href="https://docs.docker.com/compose/django/">Quickstart: Comopse and Django</a>. Jako mały cheat sheet dla siebie z przyszłości wylistuję elementy, które w procesie stawiania środowiska okazały się przydatne.</p> <p>Pracując na Ubuntu 16.04 LTS, wykonanie tutoriala znajdującego się na oficjalnej stronie Dockera przechodzi całkiem bezproblemowo. Podczas jego realizacji przydatnych było kilka poleceń:</p> <ul> <li><code class="highlighter-rouge">docker ps</code> - Listuje kontenery.</li> <li><code class="highlighter-rouge">docker exec -it &lt;container_id&gt; &lt;command&gt;</code> - Wykonuje polecenie CLI wewnątrz wskazanego kontenera.</li> <li><code class="highlighter-rouge">docker logs &lt;container_id&gt;</code> - Wyświetla logi ze wskazanego kontenera.</li> <li><code class="highlighter-rouge">docker rmi [rf] &lt;image_id&gt;</code> - Usuwa wskazany obraz.</li> <li><code class="highlighter-rouge">docker build . --no-cache</code> - Flaga <code class="highlighter-rouge">--no-cache</code> wymusza zbudowanie kontenera od zera.</li> <li><code class="highlighter-rouge">docker-compose up</code> - Buduje, tworzy, uruchamia kontener, obrazy, wolumeny.</li> <li><code class="highlighter-rouge">docker-compose down</code> - Zatrzymuje i usuwa kontenery, obrazy, wolumeny stworzone podczas <code class="highlighter-rouge">up</code>.</li> <li><code class="highlighter-rouge">docker-compose build</code> - Buduje kontener(y).</li> <li><code class="highlighter-rouge">docker-compose exec web bash</code> - Uruchamia interaktywny prompt wewnątrz kontenera.</li> </ul> <p>Przy wykorzystywaniu powyższych poleceń pojawiło się kilka ciekawostek.</p> <h1 id="docker-vs-docker-compose">docker vs docker-compose</h1> <p>Czym jest <code class="highlighter-rouge">docker</code>, a czym <code class="highlighter-rouge">docker-compose</code>? <code class="highlighter-rouge">docker</code> jest interfejsem CLI służącym do zarządzania poszczególnymi kontenerami. <code class="highlighter-rouge">docker-compose</code> jest pewnym API/fasadą stojącą warstwę przed interfejsem Dockera. <code class="highlighter-rouge">docker-compose</code> pozwala wykonywać operacje na wielu kontenerach i dzięki temu skraca listę komend potrzebnych do osiągnięcia określonego celu, po to wykorzystuje plik <code class="highlighter-rouge">docker-compose.yml</code>.</p> <h1 id="docker-exec--it">docker exec -it</h1> <p>Interesujący jest parametr <code class="highlighter-rouge">-it</code> występujący obok <code class="highlighter-rouge">docker exec</code>. Tutaj szczerze mówiąc nie wiem czy jestem w stanie to dobrze wyjaśnić, ponieważ źródła które czytałem nie były dla mnie w pełni zrozumiałe, a wyjaśnienie znajdujące się w oficjalnej dokumentacji również jest niejasne. Całość ma związek z <code class="highlighter-rouge">stdin</code>, <code class="highlighter-rouge">stdout</code> oraz <code class="highlighter-rouge">tty</code>. Parametr <code class="highlighter-rouge">-t</code> dotyczy <code class="highlighter-rouge">tty</code>, które jest pojęciem mającym swoje korzenie w historii używania terminali w starych komputerach i jest rozwinięciem skrótu jest <code class="highlighter-rouge">TeleTYpewriter</code>. W dzisiejszych czasach oznacza wirtualną tekstową konsolę do których (jest ich 6) w Ubuntu możemy wejść przez użycie jednego ze skrótów:</p> <ul> <li><code class="highlighter-rouge">tty1</code> - <code class="highlighter-rouge">Ctrl + Alt + F1</code>,</li> <li><code class="highlighter-rouge">tty2</code> - <code class="highlighter-rouge">Ctrl + Alt + F2</code>,</li> <li><code class="highlighter-rouge">tty3</code> - <code class="highlighter-rouge">Ctrl + Alt + F3</code>,</li> <li><code class="highlighter-rouge">tty4</code> - <code class="highlighter-rouge">Ctrl + Alt + F4</code>,</li> <li><code class="highlighter-rouge">tty5</code> - <code class="highlighter-rouge">Ctrl + Alt + F5</code>,</li> <li><code class="highlighter-rouge">tty6</code> - <code class="highlighter-rouge">Ctrl + Alt + F6</code>,</li> <li>Powrót do GUI - <code class="highlighter-rouge">Ctrl + Alt + F7</code>,</li> </ul> <p>Parametr <code class="highlighter-rouge">-i</code> oznacza dodanie strumieniu wejściowego. W połączeniu <code class="highlighter-rouge">-it</code> mówi Dockerowi, że w ramach polecenia <code class="highlighter-rouge">exec</code> chcemy dodać silnik terminalu wraz z możliwością przekazania czegoś do wejścia, po czym wynik wykonania operacji otrzymujemy w strumieniu wyjściowym, w warstwie, w której wykonujemy polecenie <code class="highlighter-rouge">docker exec -it &lt;command&gt;</code>.</p> <h1 id="volumes">Volumes</h1> <p>W pliku konfiguracyjnym definiujemy <code class="highlighter-rouge">volumes</code>. Wykorzystywane są one w celu skopiowania naszego kodu źródłowego z lokalnego hosta (do którego mamy podpięte repozytorium) w głąb kontenera. Innymi słowy, przekazujemy aktualny kod źródłowy nad którym pracujemy do kontenera, aby mógł on zostać uruchomiony wewnątrz kontenera. Nie musimy go kopiować ręcznie.</p> <h1 id="podsumowanie">Podsumowanie</h1> <p>Wykorzystywanie Dockera jest przydatne nie tylko w środowisku produkcyjnym do łatwego skalowania aplikacji, ale też jest wygodnym rozwiązaniem umożliwiającym prace w środowisku developerskim. Po przygotowaniu kilku plików możemy umieścić je w repozytorium, aby ułatwić życie naszym kolegom, których zadanie ograniczy się do pobrania kodu z repozytorium i uruchomienia kontenerów przez <code class="highlighter-rouge">docker-compose</code>.</p> <hr /> <h4 id="Źródła-i-pojęcia">Źródła i pojęcia</h4> <ul> <li>[1] <a href="https://devstyle.pl/daj-sie-poznac/">Daj się poznać</a></li> <li>[2] <a href="https://pl.wikipedia.org/wiki/Tyche">tyche, Wikipedia</a></li> <li>[3] <a href="http://slack.com">Slack</a></li> <li>[4] <a href="github.com">GitHub</a></li> <li>[5] <a href="https://www.zenhub.com/">ZenHub</a></li> <li>[6] <a href="https://wiki.python.org/moin/Python2orPython3">Python2orPython3, WikiPython</a></li> <li>[7] <a href="https://www.docker.com/what-docker">What is Docker?, Docker.com</a></li> <li>[8] <a href="https://hub.docker.com/">Docker Hub</a></li> <li>[9] <a href="https://docs.docker.com/compose/django/">Docker Quickstart: Comopse and Django</a></li> </ul> </article> <div class="page-navigation code"> <a class="prev" href="https://rmakara.github.io/pages/rmakara/OnEstimates-Czesc-III-Zagrozenia-plynace-z-estymacji" title="PREV: OnEstimates. Część III&#58; Zagrożenia płynące z estymacji">Poprzedni artykuł</a> <span> &middot; </span> <a class="home" href="https://rmakara.github.io/pages/rmakara" title="Wróć na Stronę Główną">Wróć na Stronę Główną</a> <span> &middot; </span> <a class="next" href="https://rmakara.github.io/pages/rmakara/Ksiazki-i-najlepszy-prezent-materialny-w-2017" title="NEXT: Książki i najlepszy prezent materialny w 2017">Następny artykuł</a> </div> </div> <div class="footer"> <span class="block">&copy; 2018 Rafał Makara</span> <span class="block"><small>&lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/heiswayi/the-plain">The Plain theme</a>.</small></span> </div> </body> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-92815270-1', 'auto'); ga('send', 'pageview'); </script> </html>
